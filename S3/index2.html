<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
    </head>

    <body>
        <script>
            // Напишите функцию getPrototypeChain(obj), которая будет
            // возвращать цепочку прототипов для заданного объекта
            // obj. Функция должна вернуть массив прототипов, начиная
            // от самого объекта и заканчивая глобальным объектом
            // Object.prototype.

            function getPrototypeChain(object) {
                const parents = [];
                while (object !== null) {
                    parents.push(object);
                    object = Object.getPrototypeOf(object);
                }
                return parents;
            }

            console.log(getPrototypeChain({ a: 1 }));

            // Создайте класс Animal, который будет представлять животное. У
            // класса Animal должны быть следующие свойства и методы:
            // ● Свойство name (строка) - имя животного.
            // ● Метод speak() - выводит в консоль звук, издаваемый животным.
            // Создайте подкласс Dog, который наследует класс Animal. Для
            // подкласса Dog добавьте дополнительное свойство и метод:
            // ● Свойство breed (строка) - порода собаки.
            // ● Метод fetch() - выводит в консоль сообщение "Собака [name]
            // принесла мяч.".

            class Animal {
                constructor(name) {
                    this.name = name;
                }
                speak() {
                    return console.log(`${this.name} издает звук`);
                }
            }

            class Dog extends Animal {
                constructor(name, breed) {
                    super(name);
                    this.breed = breed;
                }
                fetch() {
                    return console.log(
                        `Собака породы ${this.breed} по кличке ${this.name} принесла мяч.`
                    );
                }
            }

            const animal1 = new Animal("Животное");
            animal1.speak(); // Вывод: Животное издает звук.
            const dog1 = new Dog("Бобик", "Дворняжка");
            dog1.speak(); // Вывод: Животное Бобик издает звук.
            console.log(dog1.breed); // Вывод: Дворняжка
            dog1.fetch(); // Вывод: Собака Бобик принесла мяч

            // Создать класс "Пользователь" с приватными полями "имя", "возраст" и "электронная почта". Класс должен иметь публичные методы "изменить имя", "изменить возраст" и "изменить электронную почту", которые будут изменять соответствующие поля объекта. Также класс должен иметь статическое поле "максимальный возраст", которое будет задавать максимально допустимый возраст для всех создаваемых объектов.

            class User {
                #name;
                #age;
                #email;
                static #maxAge = 99;

                constructor(name, age, email) {
                    this.#name = name;
                    this.#age = age;
                    this.#email = email;
                    if (age > User.#maxAge) {
                        throw new Error(
                            "Превышен максимальный допустимый возраст"
                        );
                    }
                }

                setName(newName) {
                    return (this.#name = newName);
                }

                setAge(newAge) {
                    if (newAge > User.#maxAge) {
                        throw new Error(
                            "Превышен максимальный допустимый возраст"
                        );
                    } else {
                        return (this.#age = newAge);
                    }
                }

                setEmail(newEmail) {
                    return (this.#email = newEmail);
                }

                getInfo() {
                    console.log(
                        `Name: ${this.#name}\nAge: ${this.#age}\nEmail: ${
                            this.#email
                        }`
                    );
                }
            }

            const user1 = new User("Alex", 22, "lyubov@mail.ru");
            user1.getInfo();
            user1.setAge(55);
            user1.getInfo();
            // user1.setAge(101);
            // const user2 = new User('Bob', 102, 'etwas@gmail.com');

            // Создать класс "Товар" с приватными полями "название", "цена" и "количество". Класс должен иметь публичные методы "изменить цену", "изменить количество" и "получить стоимость", которые будут изменять соответствующие поля объекта и возвращать стоимость товара соответственно. Также класс должен иметь статическое поле "максимальное количество", которое будет задавать максимально допустимое количество товара для всех создаваемых объектов.

            class Product {
                #name;
                #price;
                #quantity;
                static #maxQuantity = 10;

                constructor(name, price, quantity) {
                    this.#name = name;
                    this.#price = price;
                    this.#quantity = quantity;
                    if (quantity > Product.#maxQuantity) {
                        throw new Error(
                            "Превышено максимально допустимое количество товара"
                        );
                    }
                }

                changePrice(newPrice) {
                    return (this.#price = newPrice);
                }

                changeQuantity(newQuantity) {
                    if (newQuantity > Product.#maxQuantity) {
                        throw new Error(
                            "Превышено максимально допустимое количество товара"
                        );
                    } else {
                        return (this.#quantity = newQuantity);
                    }
                }

                get price() {
                    return this.#price;
                }

                set price(newPrice){
                    return (this.#price = newPrice);
                }
            }

            const product1 = new Product("Tekila", 5, 1);
            console.log(product1);
            product1.changePrice(10);
            product1.changeQuantity(2);
            console.log(`Новая цена: ${product1.price}`);
            product1.price = 24;
            console.log(product1);            
            // product1.changeQuantity(15);
        </script>
    </body>
</html>
